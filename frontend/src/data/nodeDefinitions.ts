
export type NodeCategory =
  | 'ai'
  | 'data'
  | 'integration'
  | 'logic'
  | 'communication'
  | 'transform';

export interface ConfigField {
  name: string;
  label: string;
  type: 'text' | 'textarea' | 'number' | 'select' | 'boolean' | 'json' | 'code' | 'file' | 'color' | 'slider' | 'password';
  options?: { value: string; label: string }[];
  placeholder?: string;
  required?: boolean;
  default?: any;
  min?: number;
  max?: number;
  step?: number;
}

export interface NodeDefinition {
  type: string;
  label: string;
  description: string;
  category: NodeCategory;
  icon: string;
  color: string;
  bgColor: string;
  inputs: { id: string; label: string; type: string }[];
  outputs: { id: string; label: string; type: string }[];
  configFields: ConfigField[];
  defaultData: Record<string, any>;
}

// Category metadata for UI
export const NODE_CATEGORIES: Record<NodeCategory, { label: string; icon: string; color: string; description: string }> = {
  ai: {
    label: 'AI / ML',
    icon: 'üß†',
    color: '#8B5CF6',
    description: 'AI and Machine Learning nodes',
  },
  data: {
    label: 'Data',
    icon: 'üìä',
    color: '#10B981',
    description: 'Data input, output, and processing',
  },
  integration: {
    label: 'Integration',
    icon: 'üîå',
    color: '#3B82F6',
    description: 'External services and APIs',
  },
  logic: {
    label: 'Logic',
    icon: '‚ö°',
    color: '#F59E0B',
    description: 'Control flow and logic operations',
  },
  communication: {
    label: 'Communication',
    icon: 'üí¨',
    color: '#EC4899',
    description: 'Messaging and notifications',
  },
  transform: {
    label: 'Transform',
    icon: 'üîÑ',
    color: '#06B6D4',
    description: 'Data transformation and formatting',
  },
};

// ============================================
// 50 NODE DEFINITIONS
// ============================================

export const NODE_DEFINITIONS: NodeDefinition[] = [
  // ==========================================
  // AI / ML NODES (1-12)
  // ==========================================
  {
    type: 'llm',
    label: 'LLM Prompt',
    description: 'Send a prompt to a language model and get a response',
    category: 'ai',
    icon: 'üß†',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [
      { id: 'context', label: 'Context', type: 'string' },
      { id: 'query', label: 'Query', type: 'string' },
    ],
    outputs: [{ id: 'output', label: 'Response', type: 'string' }],
    configFields: [
      {
        name: 'provider',
        label: 'Provider',
        type: 'select',
        options: [
          { value: 'google', label: 'Google Gemini' },
          { value: 'openai', label: 'OpenAI' },
          { value: 'anthropic', label: 'Anthropic Claude' },
          { value: 'mistral', label: 'Mistral AI' },
          { value: 'groq', label: 'Groq' },
          { value: 'xai', label: 'xAI Grok' },
          { value: 'cohere', label: 'Cohere' },
        ],
        default: 'google',
      },
      {
        name: 'model',
        label: 'Model',
        type: 'select',
        options: [],
        default: 'gemini-2.5-flash',
      },
      { name: 'systemPrompt', label: 'System Prompt', type: 'textarea', placeholder: 'You are a helpful assistant...', required: false },
      { name: 'temperature', label: 'Temperature', type: 'slider', min: 0, max: 2, step: 0.1, default: 0.7 },
      { name: 'maxTokens', label: 'Max Tokens', type: 'number', default: 4096, min: 1, max: 128000 },
      { name: 'useGlobalApiKey', label: 'Use Global API Key', type: 'boolean', default: true },
      { name: 'apiKey', label: 'API Key', type: 'password', placeholder: 'Enter API key...' },
    ],
    defaultData: { provider: 'google', model: 'gemini-2.5-flash', temperature: 0.7, maxTokens: 4096, useGlobalApiKey: true },
  },
  {
    type: 'llmChat',
    label: 'LLM Chat',
    description: 'Multi-turn conversation with memory',
    category: 'ai',
    icon: 'üí¨',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [
      { id: 'message', label: 'Message', type: 'string' },
      { id: 'history', label: 'History', type: 'array' },
    ],
    outputs: [
      { id: 'response', label: 'Response', type: 'string' },
      { id: 'history', label: 'Updated History', type: 'array' },
    ],
    configFields: [
      {
        name: 'provider',
        label: 'Provider',
        type: 'select',
        options: [
          { value: 'google', label: 'Google Gemini' },
          { value: 'openai', label: 'OpenAI' },
          { value: 'anthropic', label: 'Anthropic Claude' },
        ],
        default: 'google',
      },
      { name: 'systemMessage', label: 'System Message', type: 'textarea', placeholder: 'You are a helpful assistant...' },
      { name: 'memorySize', label: 'Memory Size (messages)', type: 'number', default: 20, min: 1, max: 100 },
      { name: 'useGlobalApiKey', label: 'Use Global API Key', type: 'boolean', default: true },
    ],
    defaultData: { provider: 'google', systemMessage: '', memorySize: 20, useGlobalApiKey: true },
  },
  {
    type: 'textClassifier',
    label: 'Text Classifier',
    description: 'Classify text into predefined categories using AI',
    category: 'ai',
    icon: 'üè∑Ô∏è',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [
      { id: 'category', label: 'Category', type: 'string' },
      { id: 'confidence', label: 'Confidence', type: 'number' },
      { id: 'allScores', label: 'All Scores', type: 'object' },
    ],
    configFields: [
      { name: 'categories', label: 'Categories (comma-separated)', type: 'text', placeholder: 'positive, negative, neutral', required: true },
      { name: 'multiLabel', label: 'Multi-label Classification', type: 'boolean', default: false },
      { name: 'threshold', label: 'Confidence Threshold', type: 'slider', min: 0, max: 1, step: 0.05, default: 0.5 },
    ],
    defaultData: { categories: '', multiLabel: false, threshold: 0.5 },
  },
  {
    type: 'sentimentAnalyzer',
    label: 'Sentiment Analyzer',
    description: 'Analyze the sentiment and emotion of text',
    category: 'ai',
    icon: 'üòä',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [
      { id: 'sentiment', label: 'Sentiment', type: 'string' },
      { id: 'score', label: 'Score', type: 'number' },
      { id: 'emotions', label: 'Emotions', type: 'object' },
    ],
    configFields: [
      {
        name: 'granularity',
        label: 'Granularity',
        type: 'select',
        options: [
          { value: 'document', label: 'Document Level' },
          { value: 'sentence', label: 'Sentence Level' },
          { value: 'aspect', label: 'Aspect-based' },
        ],
        default: 'document',
      },
      { name: 'includeEmotions', label: 'Include Emotions', type: 'boolean', default: true },
      { name: 'language', label: 'Language', type: 'select', options: [
        { value: 'auto', label: 'Auto Detect' },
        { value: 'en', label: 'English' },
        { value: 'es', label: 'Spanish' },
        { value: 'fr', label: 'French' },
        { value: 'de', label: 'German' },
      ], default: 'auto' },
    ],
    defaultData: { granularity: 'document', includeEmotions: true, language: 'auto' },
  },
  {
    type: 'textSummarizer',
    label: 'Text Summarizer',
    description: 'Summarize long text into concise summaries',
    category: 'ai',
    icon: 'üìù',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [{ id: 'summary', label: 'Summary', type: 'string' }],
    configFields: [
      {
        name: 'style',
        label: 'Summary Style',
        type: 'select',
        options: [
          { value: 'paragraph', label: 'Paragraph' },
          { value: 'bullets', label: 'Bullet Points' },
          { value: 'tldr', label: 'TL;DR (One Line)' },
          { value: 'executive', label: 'Executive Summary' },
        ],
        default: 'paragraph',
      },
      { name: 'maxLength', label: 'Max Length (words)', type: 'number', default: 150, min: 10, max: 1000 },
      { name: 'preserveKeyPoints', label: 'Preserve Key Points', type: 'boolean', default: true },
    ],
    defaultData: { style: 'paragraph', maxLength: 150, preserveKeyPoints: true },
  },
  {
    type: 'entityExtractor',
    label: 'Entity Extractor',
    description: 'Extract named entities (people, places, organizations)',
    category: 'ai',
    icon: 'üîç',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [
      { id: 'entities', label: 'Entities', type: 'array' },
      { id: 'grouped', label: 'Grouped by Type', type: 'object' },
    ],
    configFields: [
      {
        name: 'entityTypes',
        label: 'Entity Types',
        type: 'select',
        options: [
          { value: 'all', label: 'All Types' },
          { value: 'person', label: 'People' },
          { value: 'organization', label: 'Organizations' },
          { value: 'location', label: 'Locations' },
          { value: 'date', label: 'Dates' },
          { value: 'money', label: 'Money/Currency' },
          { value: 'product', label: 'Products' },
        ],
        default: 'all',
      },
      { name: 'includePositions', label: 'Include Text Positions', type: 'boolean', default: false },
      { name: 'minConfidence', label: 'Min Confidence', type: 'slider', min: 0, max: 1, step: 0.1, default: 0.7 },
    ],
    defaultData: { entityTypes: 'all', includePositions: false, minConfidence: 0.7 },
  },
  {
    type: 'translator',
    label: 'AI Translator',
    description: 'Translate text between languages using AI',
    category: 'ai',
    icon: 'üåê',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [
      { id: 'translated', label: 'Translated Text', type: 'string' },
      { id: 'detectedLanguage', label: 'Detected Language', type: 'string' },
    ],
    configFields: [
      {
        name: 'sourceLang',
        label: 'Source Language',
        type: 'select',
        options: [
          { value: 'auto', label: 'Auto Detect' },
          { value: 'en', label: 'English' },
          { value: 'es', label: 'Spanish' },
          { value: 'fr', label: 'French' },
          { value: 'de', label: 'German' },
          { value: 'it', label: 'Italian' },
          { value: 'pt', label: 'Portuguese' },
          { value: 'zh', label: 'Chinese' },
          { value: 'ja', label: 'Japanese' },
          { value: 'ko', label: 'Korean' },
          { value: 'ar', label: 'Arabic' },
          { value: 'hi', label: 'Hindi' },
          { value: 'ru', label: 'Russian' },
        ],
        default: 'auto',
      },
      {
        name: 'targetLang',
        label: 'Target Language',
        type: 'select',
        options: [
          { value: 'en', label: 'English' },
          { value: 'es', label: 'Spanish' },
          { value: 'fr', label: 'French' },
          { value: 'de', label: 'German' },
          { value: 'it', label: 'Italian' },
          { value: 'pt', label: 'Portuguese' },
          { value: 'zh', label: 'Chinese' },
          { value: 'ja', label: 'Japanese' },
          { value: 'ko', label: 'Korean' },
          { value: 'ar', label: 'Arabic' },
          { value: 'hi', label: 'Hindi' },
          { value: 'ru', label: 'Russian' },
        ],
        default: 'en',
        required: true,
      },
      { name: 'preserveFormatting', label: 'Preserve Formatting', type: 'boolean', default: true },
      { name: 'formalityLevel', label: 'Formality', type: 'select', options: [
        { value: 'auto', label: 'Auto' },
        { value: 'formal', label: 'Formal' },
        { value: 'informal', label: 'Informal' },
      ], default: 'auto' },
    ],
    defaultData: { sourceLang: 'auto', targetLang: 'en', preserveFormatting: true, formalityLevel: 'auto' },
  },
  {
    type: 'codeGenerator',
    label: 'Code Generator',
    description: 'Generate code from natural language descriptions',
    category: 'ai',
    icon: 'üíª',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [
      { id: 'description', label: 'Description', type: 'string' },
      { id: 'context', label: 'Context Code', type: 'string' },
    ],
    outputs: [
      { id: 'code', label: 'Generated Code', type: 'string' },
      { id: 'explanation', label: 'Explanation', type: 'string' },
    ],
    configFields: [
      {
        name: 'language',
        label: 'Programming Language',
        type: 'select',
        options: [
          { value: 'javascript', label: 'JavaScript' },
          { value: 'typescript', label: 'TypeScript' },
          { value: 'python', label: 'Python' },
          { value: 'java', label: 'Java' },
          { value: 'csharp', label: 'C#' },
          { value: 'cpp', label: 'C++' },
          { value: 'go', label: 'Go' },
          { value: 'rust', label: 'Rust' },
          { value: 'ruby', label: 'Ruby' },
          { value: 'php', label: 'PHP' },
          { value: 'swift', label: 'Swift' },
          { value: 'kotlin', label: 'Kotlin' },
          { value: 'sql', label: 'SQL' },
          { value: 'html', label: 'HTML/CSS' },
        ],
        default: 'javascript',
      },
      { name: 'includeComments', label: 'Include Comments', type: 'boolean', default: true },
      { name: 'includeTests', label: 'Generate Tests', type: 'boolean', default: false },
      { name: 'style', label: 'Code Style', type: 'select', options: [
        { value: 'concise', label: 'Concise' },
        { value: 'verbose', label: 'Verbose/Educational' },
        { value: 'production', label: 'Production-Ready' },
      ], default: 'production' },
    ],
    defaultData: { language: 'javascript', includeComments: true, includeTests: false, style: 'production' },
  },
  {
    type: 'imageAnalyzer',
    label: 'Image Analyzer',
    description: 'Analyze images using vision AI models',
    category: 'ai',
    icon: 'üñºÔ∏è',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'image', label: 'Image URL/Base64', type: 'string' }],
    outputs: [
      { id: 'description', label: 'Description', type: 'string' },
      { id: 'objects', label: 'Detected Objects', type: 'array' },
      { id: 'text', label: 'Extracted Text', type: 'string' },
    ],
    configFields: [
      {
        name: 'analysisType',
        label: 'Analysis Type',
        type: 'select',
        options: [
          { value: 'describe', label: 'Describe Image' },
          { value: 'ocr', label: 'Extract Text (OCR)' },
          { value: 'objects', label: 'Detect Objects' },
          { value: 'faces', label: 'Detect Faces' },
          { value: 'all', label: 'Full Analysis' },
        ],
        default: 'describe',
      },
      { name: 'detailLevel', label: 'Detail Level', type: 'select', options: [
        { value: 'low', label: 'Low (Faster)' },
        { value: 'medium', label: 'Medium' },
        { value: 'high', label: 'High (Detailed)' },
      ], default: 'medium' },
      { name: 'customPrompt', label: 'Custom Analysis Prompt', type: 'textarea', placeholder: 'What specific aspects should I analyze?' },
    ],
    defaultData: { analysisType: 'describe', detailLevel: 'medium', customPrompt: '' },
  },
  {
    type: 'embeddingGenerator',
    label: 'Embedding Generator',
    description: 'Generate vector embeddings for text',
    category: 'ai',
    icon: 'üìê',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [
      { id: 'embedding', label: 'Embedding Vector', type: 'array' },
      { id: 'dimensions', label: 'Dimensions', type: 'number' },
    ],
    configFields: [
      {
        name: 'model',
        label: 'Embedding Model',
        type: 'select',
        options: [
          { value: 'text-embedding-3-small', label: 'OpenAI Small (1536d)' },
          { value: 'text-embedding-3-large', label: 'OpenAI Large (3072d)' },
          { value: 'text-embedding-ada-002', label: 'OpenAI Ada (1536d)' },
          { value: 'embedding-001', label: 'Google Embedding' },
        ],
        default: 'text-embedding-3-small',
      },
      { name: 'normalize', label: 'Normalize Vector', type: 'boolean', default: true },
    ],
    defaultData: { model: 'text-embedding-3-small', normalize: true },
  },
  {
    type: 'qaExtractor',
    label: 'Q&A Extractor',
    description: 'Extract answers to questions from context',
    category: 'ai',
    icon: '‚ùì',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [
      { id: 'context', label: 'Context', type: 'string' },
      { id: 'question', label: 'Question', type: 'string' },
    ],
    outputs: [
      { id: 'answer', label: 'Answer', type: 'string' },
      { id: 'confidence', label: 'Confidence', type: 'number' },
      { id: 'sourceSpan', label: 'Source Span', type: 'string' },
    ],
    configFields: [
      { name: 'maxAnswerLength', label: 'Max Answer Length', type: 'number', default: 200, min: 10, max: 1000 },
      { name: 'includeExplanation', label: 'Include Explanation', type: 'boolean', default: false },
      { name: 'allowNoAnswer', label: 'Allow "No Answer"', type: 'boolean', default: true },
    ],
    defaultData: { maxAnswerLength: 200, includeExplanation: false, allowNoAnswer: true },
  },
  {
    type: 'contentModerator',
    label: 'Content Moderator',
    description: 'Check content for inappropriate material',
    category: 'ai',
    icon: 'üõ°Ô∏è',
    color: '#8B5CF6',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'content', label: 'Content', type: 'string' }],
    outputs: [
      { id: 'isSafe', label: 'Is Safe', type: 'boolean' },
      { id: 'categories', label: 'Flagged Categories', type: 'array' },
      { id: 'scores', label: 'Category Scores', type: 'object' },
    ],
    configFields: [
      {
        name: 'categories',
        label: 'Check Categories',
        type: 'select',
        options: [
          { value: 'all', label: 'All Categories' },
          { value: 'hate', label: 'Hate Speech' },
          { value: 'violence', label: 'Violence' },
          { value: 'sexual', label: 'Sexual Content' },
          { value: 'selfHarm', label: 'Self Harm' },
          { value: 'spam', label: 'Spam' },
        ],
        default: 'all',
      },
      { name: 'threshold', label: 'Flag Threshold', type: 'slider', min: 0, max: 1, step: 0.05, default: 0.7 },
      { name: 'blockOnFlag', label: 'Block if Flagged', type: 'boolean', default: true },
    ],
    defaultData: { categories: 'all', threshold: 0.7, blockOnFlag: true },
  },

  // ==========================================
  // DATA NODES (13-22)
  // ==========================================
  {
    type: 'input',
    label: 'Input',
    description: 'Starting point - accepts initial data',
    category: 'data',
    icon: 'üì•',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [],
    outputs: [{ id: 'output', label: 'Data', type: 'any' }],
    configFields: [
      {
        name: 'inputType',
        label: 'Input Type',
        type: 'select',
        options: [
          { value: 'text', label: 'Text' },
          { value: 'json', label: 'JSON' },
          { value: 'number', label: 'Number' },
          { value: 'file', label: 'File Upload' },
          { value: 'manual', label: 'Manual Entry' },
        ],
        default: 'text',
      },
      { name: 'defaultValue', label: 'Default Value', type: 'textarea', placeholder: 'Enter default input...' },
      { name: 'required', label: 'Required', type: 'boolean', default: true },
      { name: 'label', label: 'Input Label', type: 'text', placeholder: 'User Input' },
    ],
    defaultData: { inputType: 'text', defaultValue: '', required: true, label: 'Input' },
  },
  {
    type: 'output',
    label: 'Output',
    description: 'End point - displays or exports results',
    category: 'data',
    icon: 'üì§',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'input', label: 'Data', type: 'any' }],
    outputs: [],
    configFields: [
      {
        name: 'outputType',
        label: 'Output Type',
        type: 'select',
        options: [
          { value: 'display', label: 'Display in UI' },
          { value: 'json', label: 'JSON Download' },
          { value: 'file', label: 'File Download' },
          { value: 'console', label: 'Console Log' },
          { value: 'variable', label: 'Store in Variable' },
        ],
        default: 'display',
      },
      {
        name: 'format',
        label: 'Display Format',
        type: 'select',
        options: [
          { value: 'text', label: 'Plain Text' },
          { value: 'markdown', label: 'Markdown' },
          { value: 'json', label: 'Formatted JSON' },
          { value: 'table', label: 'Table' },
          { value: 'code', label: 'Code Block' },
        ],
        default: 'text',
      },
      { name: 'filename', label: 'Filename (for download)', type: 'text', placeholder: 'output.txt' },
    ],
    defaultData: { outputType: 'display', format: 'text', filename: 'output.txt' },
  },
  {
    type: 'jsonParser',
    label: 'JSON Parser',
    description: 'Parse and extract data from JSON',
    category: 'data',
    icon: '{ }',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'json', label: 'JSON String/Object', type: 'any' }],
    outputs: [
      { id: 'data', label: 'Parsed Data', type: 'any' },
      { id: 'extracted', label: 'Extracted Value', type: 'any' },
    ],
    configFields: [
      { name: 'jsonPath', label: 'JSON Path', type: 'text', placeholder: '$.data.items[0].name' },
      { name: 'fallbackValue', label: 'Fallback Value', type: 'text', placeholder: 'null' },
      { name: 'parseStrings', label: 'Parse Nested JSON Strings', type: 'boolean', default: false },
    ],
    defaultData: { jsonPath: '', fallbackValue: 'null', parseStrings: false },
  },
  {
    type: 'csvParser',
    label: 'CSV Parser',
    description: 'Parse CSV data into structured format',
    category: 'data',
    icon: 'üìä',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'csv', label: 'CSV Data', type: 'string' }],
    outputs: [
      { id: 'rows', label: 'Rows', type: 'array' },
      { id: 'headers', label: 'Headers', type: 'array' },
      { id: 'json', label: 'As JSON', type: 'array' },
    ],
    configFields: [
      {
        name: 'delimiter',
        label: 'Delimiter',
        type: 'select',
        options: [
          { value: ',', label: 'Comma (,)' },
          { value: ';', label: 'Semicolon (;)' },
          { value: '\t', label: 'Tab' },
          { value: '|', label: 'Pipe (|)' },
          { value: 'auto', label: 'Auto Detect' },
        ],
        default: ',',
      },
      { name: 'hasHeader', label: 'First Row is Header', type: 'boolean', default: true },
      { name: 'skipEmptyRows', label: 'Skip Empty Rows', type: 'boolean', default: true },
      { name: 'trimValues', label: 'Trim Whitespace', type: 'boolean', default: true },
    ],
    defaultData: { delimiter: ',', hasHeader: true, skipEmptyRows: true, trimValues: true },
  },
  {
    type: 'xmlParser',
    label: 'XML Parser',
    description: 'Parse XML data and extract values',
    category: 'data',
    icon: 'üìÑ',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'xml', label: 'XML Data', type: 'string' }],
    outputs: [
      { id: 'json', label: 'As JSON', type: 'object' },
      { id: 'extracted', label: 'XPath Result', type: 'any' },
    ],
    configFields: [
      { name: 'xpath', label: 'XPath Query', type: 'text', placeholder: '//item/name' },
      { name: 'returnArray', label: 'Return as Array', type: 'boolean', default: false },
      { name: 'includeAttributes', label: 'Include Attributes', type: 'boolean', default: true },
    ],
    defaultData: { xpath: '', returnArray: false, includeAttributes: true },
  },
  {
    type: 'dataValidator',
    label: 'Data Validator',
    description: 'Validate data against a schema',
    category: 'data',
    icon: '‚úÖ',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [
      { id: 'valid', label: 'Valid Data', type: 'any' },
      { id: 'invalid', label: 'Invalid Data', type: 'any' },
      { id: 'errors', label: 'Errors', type: 'array' },
    ],
    configFields: [
      {
        name: 'validationType',
        label: 'Validation Type',
        type: 'select',
        options: [
          { value: 'jsonSchema', label: 'JSON Schema' },
          { value: 'regex', label: 'Regex Pattern' },
          { value: 'custom', label: 'Custom Rules' },
        ],
        default: 'jsonSchema',
      },
      { name: 'schema', label: 'Schema/Pattern', type: 'code', placeholder: '{"type": "object", "properties": {...}}' },
      { name: 'stopOnError', label: 'Stop on First Error', type: 'boolean', default: false },
    ],
    defaultData: { validationType: 'jsonSchema', schema: '', stopOnError: false },
  },
  {
    type: 'dataMapper',
    label: 'Data Mapper',
    description: 'Map and transform data fields',
    category: 'data',
    icon: 'üó∫Ô∏è',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [{ id: 'mapped', label: 'Mapped Data', type: 'any' }],
    configFields: [
      { name: 'mapping', label: 'Field Mapping (JSON)', type: 'code', placeholder: '{"newField": "$.oldField", "nested.field": "$.other"}' },
      { name: 'keepUnmapped', label: 'Keep Unmapped Fields', type: 'boolean', default: false },
      { name: 'flattenOutput', label: 'Flatten Output', type: 'boolean', default: false },
    ],
    defaultData: { mapping: '', keepUnmapped: false, flattenOutput: false },
  },
  {
    type: 'arrayProcessor',
    label: 'Array Processor',
    description: 'Process arrays (filter, map, reduce, sort)',
    category: 'data',
    icon: 'üìã',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'array', label: 'Array', type: 'array' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'count', label: 'Count', type: 'number' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'filter', label: 'Filter' },
          { value: 'map', label: 'Map' },
          { value: 'reduce', label: 'Reduce' },
          { value: 'sort', label: 'Sort' },
          { value: 'unique', label: 'Remove Duplicates' },
          { value: 'flatten', label: 'Flatten' },
          { value: 'reverse', label: 'Reverse' },
          { value: 'slice', label: 'Slice' },
          { value: 'find', label: 'Find First' },
          { value: 'group', label: 'Group By' },
        ],
        default: 'filter',
      },
      { name: 'expression', label: 'Expression', type: 'code', placeholder: 'item => item.active === true' },
      { name: 'sortKey', label: 'Sort Key (for sort)', type: 'text', placeholder: 'name' },
      { name: 'sortOrder', label: 'Sort Order', type: 'select', options: [
        { value: 'asc', label: 'Ascending' },
        { value: 'desc', label: 'Descending' },
      ], default: 'asc' },
    ],
    defaultData: { operation: 'filter', expression: '', sortKey: '', sortOrder: 'asc' },
  },
  {
    type: 'variableStore',
    label: 'Variable Store',
    description: 'Store data in workflow variables',
    category: 'data',
    icon: 'üíæ',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'value', label: 'Value', type: 'any' }],
    outputs: [{ id: 'stored', label: 'Stored Value', type: 'any' }],
    configFields: [
      { name: 'variableName', label: 'Variable Name', type: 'text', placeholder: 'myVariable', required: true },
      {
        name: 'scope',
        label: 'Scope',
        type: 'select',
        options: [
          { value: 'workflow', label: 'Workflow (Current Run)' },
          { value: 'global', label: 'Global (Persistent)' },
          { value: 'session', label: 'Session (Browser)' },
        ],
        default: 'workflow',
      },
      { name: 'overwrite', label: 'Overwrite if Exists', type: 'boolean', default: true },
    ],
    defaultData: { variableName: '', scope: 'workflow', overwrite: true },
  },
  {
    type: 'variableReader',
    label: 'Variable Reader',
    description: 'Read data from workflow variables',
    category: 'data',
    icon: 'üìñ',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [],
    outputs: [{ id: 'value', label: 'Value', type: 'any' }],
    configFields: [
      { name: 'variableName', label: 'Variable Name', type: 'text', placeholder: 'myVariable', required: true },
      { name: 'defaultValue', label: 'Default Value', type: 'textarea', placeholder: 'Value if variable not found' },
      { name: 'throwIfMissing', label: 'Error if Missing', type: 'boolean', default: false },
    ],
    defaultData: { variableName: '', defaultValue: '', throwIfMissing: false },
  },

  // ==========================================
  // INTEGRATION NODES (23-35)
  // ==========================================
  {
    type: 'httpRequest',
    label: 'HTTP Request',
    description: 'Make HTTP API calls to external services',
    category: 'integration',
    icon: 'üåê',
    color: '#3B82F6',
    bgColor: '#DBEAFE',
    inputs: [
      { id: 'body', label: 'Request Body', type: 'any' },
      { id: 'headers', label: 'Headers', type: 'object' },
    ],
    outputs: [
      { id: 'response', label: 'Response', type: 'any' },
      { id: 'status', label: 'Status Code', type: 'number' },
      { id: 'headers', label: 'Response Headers', type: 'object' },
    ],
    configFields: [
      {
        name: 'method',
        label: 'Method',
        type: 'select',
        options: [
          { value: 'GET', label: 'GET' },
          { value: 'POST', label: 'POST' },
          { value: 'PUT', label: 'PUT' },
          { value: 'PATCH', label: 'PATCH' },
          { value: 'DELETE', label: 'DELETE' },
          { value: 'HEAD', label: 'HEAD' },
          { value: 'OPTIONS', label: 'OPTIONS' },
        ],
        default: 'GET',
      },
      { name: 'url', label: 'URL', type: 'text', placeholder: 'https://api.example.com/endpoint', required: true },
      { name: 'headers', label: 'Headers (JSON)', type: 'code', placeholder: '{"Authorization": "Bearer xxx"}' },
      { name: 'body', label: 'Request Body', type: 'code', placeholder: '{"key": "value"}' },
      { name: 'timeout', label: 'Timeout (ms)', type: 'number', default: 30000 },
      { name: 'retries', label: 'Retry Count', type: 'number', default: 0, min: 0, max: 5 },
      {
        name: 'responseType',
        label: 'Response Type',
        type: 'select',
        options: [
          { value: 'json', label: 'JSON' },
          { value: 'text', label: 'Text' },
          { value: 'blob', label: 'Binary/Blob' },
        ],
        default: 'json',
      },
    ],
    defaultData: { method: 'GET', url: '', headers: '', body: '', timeout: 30000, retries: 0, responseType: 'json' },
  },
  {
    type: 'webhookTrigger',
    label: 'Webhook Trigger',
    description: 'Trigger workflow from incoming webhooks',
    category: 'integration',
    icon: 'ü™ù',
    color: '#3B82F6',
    bgColor: '#DBEAFE',
    inputs: [],
    outputs: [
      { id: 'body', label: 'Request Body', type: 'any' },
      { id: 'headers', label: 'Headers', type: 'object' },
      { id: 'query', label: 'Query Params', type: 'object' },
    ],
    configFields: [
      { name: 'path', label: 'Webhook Path', type: 'text', placeholder: '/webhook/my-workflow', required: true },
      {
        name: 'method',
        label: 'HTTP Method',
        type: 'select',
        options: [
          { value: 'POST', label: 'POST' },
          { value: 'GET', label: 'GET' },
          { value: 'PUT', label: 'PUT' },
          { value: 'ANY', label: 'Any Method' },
        ],
        default: 'POST',
      },
      {
        name: 'authentication',
        label: 'Authentication',
        type: 'select',
        options: [
          { value: 'none', label: 'None' },
          { value: 'apiKey', label: 'API Key' },
          { value: 'bearer', label: 'Bearer Token' },
          { value: 'basic', label: 'Basic Auth' },
        ],
        default: 'none',
      },
      { name: 'secret', label: 'Auth Secret', type: 'password', placeholder: 'Secret key or token' },
    ],
    defaultData: { path: '', method: 'POST', authentication: 'none', secret: '' },
  },
  {
    type: 'database',
    label: 'Database Query',
    description: 'Execute database queries',
    category: 'integration',
    icon: 'üóÑÔ∏è',
    color: '#3B82F6',
    bgColor: '#DBEAFE',
    inputs: [{ id: 'params', label: 'Query Parameters', type: 'object' }],
    outputs: [
      { id: 'rows', label: 'Rows', type: 'array' },
      { id: 'count', label: 'Row Count', type: 'number' },
      { id: 'info', label: 'Query Info', type: 'object' },
    ],
    configFields: [
      {
        name: 'dbType',
        label: 'Database Type',
        type: 'select',
        options: [
          { value: 'postgresql', label: 'PostgreSQL' },
          { value: 'mysql', label: 'MySQL' },
          { value: 'mongodb', label: 'MongoDB' },
          { value: 'sqlite', label: 'SQLite' },
          { value: 'mssql', label: 'SQL Server' },
          { value: 'redis', label: 'Redis' },
        ],
        default: 'postgresql',
      },
      { name: 'connectionString', label: 'Connection String', type: 'password', placeholder: 'postgresql://user:pass@host:5432/db' },
      { name: 'query', label: 'Query', type: 'code', placeholder: 'SELECT * FROM users WHERE id = $1' },
      {
        name: 'operation',
        label: 'Operation Type',
        type: 'select',
        options: [
          { value: 'query', label: 'Query (SELECT)' },
          { value: 'execute', label: 'Execute (INSERT/UPDATE/DELETE)' },
          { value: 'transaction', label: 'Transaction' },
        ],
        default: 'query',
      },
    ],
    defaultData: { dbType: 'postgresql', connectionString: '', query: '', operation: 'query' },
  },
  {
    type: 'googleSheets',
    label: 'Google Sheets',
    description: 'Read/write data from Google Sheets',
    category: 'integration',
    icon: 'üìó',
    color: '#34A853',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'data', label: 'Data to Write', type: 'any' }],
    outputs: [
      { id: 'data', label: 'Sheet Data', type: 'array' },
      { id: 'info', label: 'Sheet Info', type: 'object' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'read', label: 'Read Data' },
          { value: 'append', label: 'Append Row' },
          { value: 'update', label: 'Update Cells' },
          { value: 'clear', label: 'Clear Range' },
          { value: 'create', label: 'Create Sheet' },
        ],
        default: 'read',
      },
      { name: 'spreadsheetId', label: 'Spreadsheet ID', type: 'text', placeholder: '1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms', required: true },
      { name: 'range', label: 'Range', type: 'text', placeholder: 'Sheet1!A1:D10', required: true },
      { name: 'valueInputOption', label: 'Value Input', type: 'select', options: [
        { value: 'RAW', label: 'Raw' },
        { value: 'USER_ENTERED', label: 'User Entered (Parse Formulas)' },
      ], default: 'USER_ENTERED' },
    ],
    defaultData: { operation: 'read', spreadsheetId: '', range: '', valueInputOption: 'USER_ENTERED' },
  },
  {
    type: 'notion',
    label: 'Notion',
    description: 'Interact with Notion databases and pages',
    category: 'integration',
    icon: 'üìì',
    color: '#000000',
    bgColor: '#F3F4F6',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'pages', label: 'Pages', type: 'array' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'queryDatabase', label: 'Query Database' },
          { value: 'createPage', label: 'Create Page' },
          { value: 'updatePage', label: 'Update Page' },
          { value: 'getPage', label: 'Get Page' },
          { value: 'appendBlock', label: 'Append Block' },
        ],
        default: 'queryDatabase',
      },
      { name: 'databaseId', label: 'Database/Page ID', type: 'text', placeholder: 'xxx-xxx-xxx', required: true },
      { name: 'filter', label: 'Filter (JSON)', type: 'code', placeholder: '{"property": "Status", "select": {"equals": "Done"}}' },
      { name: 'properties', label: 'Properties (JSON)', type: 'code', placeholder: '{"Name": {"title": [{"text": {"content": "New Page"}}]}}' },
    ],
    defaultData: { operation: 'queryDatabase', databaseId: '', filter: '', properties: '' },
  },
  {
    type: 'airtable',
    label: 'Airtable',
    description: 'Read/write data from Airtable',
    category: 'integration',
    icon: 'üìä',
    color: '#18BFFF',
    bgColor: '#E0F7FF',
    inputs: [{ id: 'data', label: 'Record Data', type: 'any' }],
    outputs: [
      { id: 'records', label: 'Records', type: 'array' },
      { id: 'record', label: 'Single Record', type: 'object' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'list', label: 'List Records' },
          { value: 'get', label: 'Get Record' },
          { value: 'create', label: 'Create Record' },
          { value: 'update', label: 'Update Record' },
          { value: 'delete', label: 'Delete Record' },
        ],
        default: 'list',
      },
      { name: 'baseId', label: 'Base ID', type: 'text', placeholder: 'appXXXXXXXXXXXXXX', required: true },
      { name: 'tableName', label: 'Table Name', type: 'text', placeholder: 'Table 1', required: true },
      { name: 'recordId', label: 'Record ID (for get/update/delete)', type: 'text', placeholder: 'recXXXXXXXXXXXXXX' },
      { name: 'filterFormula', label: 'Filter Formula', type: 'text', placeholder: '{Status} = "Active"' },
      { name: 'maxRecords', label: 'Max Records', type: 'number', default: 100 },
    ],
    defaultData: { operation: 'list', baseId: '', tableName: '', recordId: '', filterFormula: '', maxRecords: 100 },
  },
  {
    type: 'github',
    label: 'GitHub',
    description: 'Interact with GitHub repositories',
    category: 'integration',
    icon: 'üêô',
    color: '#24292E',
    bgColor: '#F3F4F6',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'items', label: 'Items', type: 'array' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'getRepo', label: 'Get Repository' },
          { value: 'listRepos', label: 'List Repositories' },
          { value: 'listIssues', label: 'List Issues' },
          { value: 'createIssue', label: 'Create Issue' },
          { value: 'listPRs', label: 'List Pull Requests' },
          { value: 'createPR', label: 'Create Pull Request' },
          { value: 'listCommits', label: 'List Commits' },
          { value: 'getFile', label: 'Get File Content' },
          { value: 'createFile', label: 'Create/Update File' },
        ],
        default: 'getRepo',
      },
      { name: 'owner', label: 'Owner/Organization', type: 'text', placeholder: 'username', required: true },
      { name: 'repo', label: 'Repository', type: 'text', placeholder: 'repo-name', required: true },
      { name: 'path', label: 'File Path (for file operations)', type: 'text', placeholder: 'src/index.js' },
      { name: 'branch', label: 'Branch', type: 'text', placeholder: 'main', default: 'main' },
    ],
    defaultData: { operation: 'getRepo', owner: '', repo: '', path: '', branch: 'main' },
  },
  {
    type: 'linkedin',
    label: 'LinkedIn',
    description: 'Interact with LinkedIn API',
    category: 'integration',
    icon: 'üíº',
    color: '#0A66C2',
    bgColor: '#E7F3FF',
    inputs: [{ id: 'data', label: 'Post Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'profile', label: 'Profile', type: 'object' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'getProfile', label: 'Get My Profile' },
          { value: 'createPost', label: 'Create Post' },
          { value: 'shareArticle', label: 'Share Article' },
          { value: 'getConnections', label: 'Get Connections' },
          { value: 'sendMessage', label: 'Send Message' },
          { value: 'getCompany', label: 'Get Company Info' },
        ],
        default: 'getProfile',
      },
      { name: 'content', label: 'Post Content', type: 'textarea', placeholder: 'Your LinkedIn post content...' },
      { name: 'articleUrl', label: 'Article URL (for sharing)', type: 'text', placeholder: 'https://...' },
      { name: 'visibility', label: 'Visibility', type: 'select', options: [
        { value: 'PUBLIC', label: 'Public' },
        { value: 'CONNECTIONS', label: 'Connections Only' },
      ], default: 'PUBLIC' },
    ],
    defaultData: { operation: 'getProfile', content: '', articleUrl: '', visibility: 'PUBLIC' },
  },
  {
    type: 'twitter',
    label: 'Twitter/X',
    description: 'Interact with Twitter/X API',
    category: 'integration',
    icon: 'üê¶',
    color: '#1DA1F2',
    bgColor: '#E8F5FD',
    inputs: [{ id: 'data', label: 'Tweet Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'tweets', label: 'Tweets', type: 'array' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'postTweet', label: 'Post Tweet' },
          { value: 'searchTweets', label: 'Search Tweets' },
          { value: 'getUserTweets', label: 'Get User Tweets' },
          { value: 'getProfile', label: 'Get Profile' },
          { value: 'retweet', label: 'Retweet' },
          { value: 'like', label: 'Like Tweet' },
          { value: 'reply', label: 'Reply to Tweet' },
        ],
        default: 'postTweet',
      },
      { name: 'text', label: 'Tweet Text', type: 'textarea', placeholder: 'Your tweet...', max: 280 },
      { name: 'username', label: 'Username (for user operations)', type: 'text', placeholder: '@username' },
      { name: 'tweetId', label: 'Tweet ID (for reply/retweet/like)', type: 'text', placeholder: '1234567890' },
      { name: 'searchQuery', label: 'Search Query', type: 'text', placeholder: '#hashtag OR keyword' },
    ],
    defaultData: { operation: 'postTweet', text: '', username: '', tweetId: '', searchQuery: '' },
  },
  {
    type: 'youtube',
    label: 'YouTube',
    description: 'Interact with YouTube API',
    category: 'integration',
    icon: '‚ñ∂Ô∏è',
    color: '#FF0000',
    bgColor: '#FFE4E4',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'videos', label: 'Videos', type: 'array' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'searchVideos', label: 'Search Videos' },
          { value: 'getVideo', label: 'Get Video Details' },
          { value: 'getChannel', label: 'Get Channel Info' },
          { value: 'getComments', label: 'Get Comments' },
          { value: 'getTranscript', label: 'Get Transcript' },
          { value: 'getPlaylist', label: 'Get Playlist' },
        ],
        default: 'searchVideos',
      },
      { name: 'query', label: 'Search Query', type: 'text', placeholder: 'search keywords' },
      { name: 'videoId', label: 'Video ID', type: 'text', placeholder: 'dQw4w9WgXcQ' },
      { name: 'channelId', label: 'Channel ID', type: 'text', placeholder: 'UCxxxxxx' },
      { name: 'maxResults', label: 'Max Results', type: 'number', default: 10, min: 1, max: 50 },
    ],
    defaultData: { operation: 'searchVideos', query: '', videoId: '', channelId: '', maxResults: 10 },
  },
  {
    type: 'stripe',
    label: 'Stripe',
    description: 'Payment processing with Stripe',
    category: 'integration',
    icon: 'üí≥',
    color: '#635BFF',
    bgColor: '#F0EFFF',
    inputs: [{ id: 'data', label: 'Payment Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'paymentIntent', label: 'Payment Intent', type: 'object' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'createPaymentIntent', label: 'Create Payment Intent' },
          { value: 'getPayment', label: 'Get Payment' },
          { value: 'listPayments', label: 'List Payments' },
          { value: 'createCustomer', label: 'Create Customer' },
          { value: 'getCustomer', label: 'Get Customer' },
          { value: 'createSubscription', label: 'Create Subscription' },
          { value: 'cancelSubscription', label: 'Cancel Subscription' },
        ],
        default: 'createPaymentIntent',
      },
      { name: 'amount', label: 'Amount (cents)', type: 'number', placeholder: '1000', min: 50 },
      { name: 'currency', label: 'Currency', type: 'select', options: [
        { value: 'usd', label: 'USD' },
        { value: 'eur', label: 'EUR' },
        { value: 'gbp', label: 'GBP' },
        { value: 'inr', label: 'INR' },
      ], default: 'usd' },
      { name: 'customerId', label: 'Customer ID', type: 'text', placeholder: 'cus_xxx' },
      { name: 'priceId', label: 'Price ID (for subscriptions)', type: 'text', placeholder: 'price_xxx' },
    ],
    defaultData: { operation: 'createPaymentIntent', amount: 1000, currency: 'usd', customerId: '', priceId: '' },
  },
    // Continuing from AWS S3...
  {
    type: 'aws',
    label: 'AWS S3',
    description: 'AWS S3 storage operations',
    category: 'integration',
    icon: '‚òÅÔ∏è',
    color: '#FF9900',
    bgColor: '#FFF4E5',
    inputs: [{ id: 'data', label: 'File Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'url', label: 'File URL', type: 'string' },
      { id: 'files', label: 'File List', type: 'array' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'upload', label: 'Upload File' },
          { value: 'download', label: 'Download File' },
          { value: 'list', label: 'List Files' },
          { value: 'delete', label: 'Delete File' },
          { value: 'getSignedUrl', label: 'Get Signed URL' },
          { value: 'copy', label: 'Copy File' },
        ],
        default: 'upload',
      },
      { name: 'bucket', label: 'Bucket Name', type: 'text', placeholder: 'my-bucket', required: true },
      { name: 'key', label: 'File Key/Path', type: 'text', placeholder: 'folder/file.txt', required: true },
      { name: 'region', label: 'Region', type: 'select', options: [
        { value: 'us-east-1', label: 'US East (N. Virginia)' },
        { value: 'us-west-2', label: 'US West (Oregon)' },
        { value: 'eu-west-1', label: 'EU (Ireland)' },
        { value: 'ap-south-1', label: 'Asia Pacific (Mumbai)' },
        { value: 'ap-southeast-1', label: 'Asia Pacific (Singapore)' },
      ], default: 'us-east-1' },
      { name: 'contentType', label: 'Content Type', type: 'text', placeholder: 'application/json' },
      { name: 'expiresIn', label: 'Signed URL Expiry (seconds)', type: 'number', default: 3600 },
    ],
    defaultData: { operation: 'upload', bucket: '', key: '', region: 'us-east-1', contentType: '', expiresIn: 3600 },
  },
  {
    type: 'firebase',
    label: 'Firebase',
    description: 'Firebase Firestore and Storage operations',
    category: 'integration',
    icon: 'üî•',
    color: '#FFCA28',
    bgColor: '#FFF8E1',
    inputs: [{ id: 'data', label: 'Data', type: 'any' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'any' },
      { id: 'documents', label: 'Documents', type: 'array' },
    ],
    configFields: [
      {
        name: 'service',
        label: 'Service',
        type: 'select',
        options: [
          { value: 'firestore', label: 'Firestore Database' },
          { value: 'storage', label: 'Cloud Storage' },
          { value: 'auth', label: 'Authentication' },
        ],
        default: 'firestore',
      },
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'get', label: 'Get Document' },
          { value: 'list', label: 'List Documents' },
          { value: 'create', label: 'Create Document' },
          { value: 'update', label: 'Update Document' },
          { value: 'delete', label: 'Delete Document' },
          { value: 'query', label: 'Query Collection' },
        ],
        default: 'get',
      },
      { name: 'collection', label: 'Collection Path', type: 'text', placeholder: 'users', required: true },
      { name: 'documentId', label: 'Document ID', type: 'text', placeholder: 'user123' },
      { name: 'queryField', label: 'Query Field', type: 'text', placeholder: 'status' },
      { name: 'queryOperator', label: 'Query Operator', type: 'select', options: [
        { value: '==', label: 'Equals (==)' },
        { value: '!=', label: 'Not Equals (!=)' },
        { value: '>', label: 'Greater Than (>)' },
        { value: '<', label: 'Less Than (<)' },
        { value: 'array-contains', label: 'Array Contains' },
      ], default: '==' },
      { name: 'queryValue', label: 'Query Value', type: 'text', placeholder: 'active' },
    ],
    defaultData: { service: 'firestore', operation: 'get', collection: '', documentId: '', queryField: '', queryOperator: '==', queryValue: '' },
  },

  // ==========================================
  // LOGIC NODES (36-43)
  // ==========================================
  {
    type: 'conditional',
    label: 'Conditional',
    description: 'Branch workflow based on conditions',
    category: 'logic',
    icon: 'üîÄ',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [
      { id: 'true', label: 'True', type: 'any' },
      { id: 'false', label: 'False', type: 'any' },
    ],
    configFields: [
      {
        name: 'conditionType',
        label: 'Condition Type',
        type: 'select',
        options: [
          { value: 'expression', label: 'JavaScript Expression' },
          { value: 'comparison', label: 'Simple Comparison' },
          { value: 'exists', label: 'Value Exists' },
          { value: 'empty', label: 'Is Empty' },
          { value: 'contains', label: 'Contains' },
          { value: 'regex', label: 'Regex Match' },
        ],
        default: 'comparison',
      },
      { name: 'leftValue', label: 'Left Value / Field', type: 'text', placeholder: 'data.status', required: true },
      {
        name: 'operator',
        label: 'Operator',
        type: 'select',
        options: [
          { value: '==', label: 'Equals (==)' },
          { value: '===', label: 'Strict Equals (===)' },
          { value: '!=', label: 'Not Equals (!=)' },
          { value: '>', label: 'Greater Than (>)' },
          { value: '>=', label: 'Greater or Equal (>=)' },
          { value: '<', label: 'Less Than (<)' },
          { value: '<=', label: 'Less or Equal (<=)' },
          { value: 'contains', label: 'Contains' },
          { value: 'startsWith', label: 'Starts With' },
          { value: 'endsWith', label: 'Ends With' },
        ],
        default: '==',
      },
      { name: 'rightValue', label: 'Right Value', type: 'text', placeholder: 'active' },
      { name: 'expression', label: 'Custom Expression', type: 'code', placeholder: 'data.value > 10 && data.status === "active"' },
    ],
    defaultData: { conditionType: 'comparison', leftValue: '', operator: '==', rightValue: '', expression: '' },
  },
  {
    type: 'switch',
    label: 'Switch',
    description: 'Route to multiple paths based on value',
    category: 'logic',
    icon: 'üîÉ',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [
      { id: 'case1', label: 'Case 1', type: 'any' },
      { id: 'case2', label: 'Case 2', type: 'any' },
      { id: 'case3', label: 'Case 3', type: 'any' },
      { id: 'case4', label: 'Case 4', type: 'any' },
      { id: 'default', label: 'Default', type: 'any' },
    ],
    configFields: [
      { name: 'switchValue', label: 'Switch Value', type: 'text', placeholder: 'data.type', required: true },
      { name: 'case1', label: 'Case 1 Value', type: 'text', placeholder: 'type_a' },
      { name: 'case2', label: 'Case 2 Value', type: 'text', placeholder: 'type_b' },
      { name: 'case3', label: 'Case 3 Value', type: 'text', placeholder: 'type_c' },
      { name: 'case4', label: 'Case 4 Value', type: 'text', placeholder: 'type_d' },
      { name: 'caseSensitive', label: 'Case Sensitive', type: 'boolean', default: true },
    ],
    defaultData: { switchValue: '', case1: '', case2: '', case3: '', case4: '', caseSensitive: true },
  },
  {
    type: 'loop',
    label: 'Loop',
    description: 'Iterate over array items',
    category: 'logic',
    icon: 'üîÅ',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'array', label: 'Array', type: 'array' }],
    outputs: [
      { id: 'item', label: 'Current Item', type: 'any' },
      { id: 'index', label: 'Index', type: 'number' },
      { id: 'completed', label: 'Loop Completed', type: 'array' },
    ],
    configFields: [
      { name: 'iterateOver', label: 'Array Field', type: 'text', placeholder: 'data.items', required: true },
      { name: 'maxIterations', label: 'Max Iterations', type: 'number', default: 100, min: 1, max: 10000 },
      { name: 'parallel', label: 'Parallel Execution', type: 'boolean', default: false },
      { name: 'batchSize', label: 'Batch Size (if parallel)', type: 'number', default: 10, min: 1, max: 100 },
      { name: 'delayBetween', label: 'Delay Between (ms)', type: 'number', default: 0, min: 0 },
    ],
    defaultData: { iterateOver: '', maxIterations: 100, parallel: false, batchSize: 10, delayBetween: 0 },
  },
  {
    type: 'delay',
    label: 'Delay',
    description: 'Wait for a specified duration',
    category: 'logic',
    icon: '‚è±Ô∏è',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [{ id: 'output', label: 'Output', type: 'any' }],
    configFields: [
      { name: 'duration', label: 'Duration', type: 'number', default: 1000, required: true, min: 0 },
      {
        name: 'unit',
        label: 'Unit',
        type: 'select',
        options: [
          { value: 'ms', label: 'Milliseconds' },
          { value: 's', label: 'Seconds' },
          { value: 'm', label: 'Minutes' },
          { value: 'h', label: 'Hours' },
        ],
        default: 's',
      },
      { name: 'randomize', label: 'Randomize (¬±%)', type: 'number', default: 0, min: 0, max: 100 },
    ],
    defaultData: { duration: 1, unit: 's', randomize: 0 },
  },
  {
    type: 'retry',
    label: 'Retry',
    description: 'Retry failed operations with backoff',
    category: 'logic',
    icon: 'üîÑ',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [
      { id: 'success', label: 'Success', type: 'any' },
      { id: 'failure', label: 'Failed (All Retries)', type: 'any' },
    ],
    configFields: [
      { name: 'maxRetries', label: 'Max Retries', type: 'number', default: 3, min: 1, max: 10 },
      { name: 'initialDelay', label: 'Initial Delay (ms)', type: 'number', default: 1000, min: 100 },
      {
        name: 'backoffType',
        label: 'Backoff Type',
        type: 'select',
        options: [
          { value: 'fixed', label: 'Fixed Delay' },
          { value: 'linear', label: 'Linear Backoff' },
          { value: 'exponential', label: 'Exponential Backoff' },
        ],
        default: 'exponential',
      },
      { name: 'backoffMultiplier', label: 'Backoff Multiplier', type: 'number', default: 2, min: 1, max: 10 },
      { name: 'maxDelay', label: 'Max Delay (ms)', type: 'number', default: 30000 },
      { name: 'retryOn', label: 'Retry On (error types)', type: 'text', placeholder: 'timeout, 5xx, network' },
    ],
    defaultData: { maxRetries: 3, initialDelay: 1000, backoffType: 'exponential', backoffMultiplier: 2, maxDelay: 30000, retryOn: '' },
  },
  {
    type: 'merge',
    label: 'Merge',
    description: 'Merge multiple inputs into one',
    category: 'logic',
    icon: 'üîó',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [
      { id: 'input1', label: 'Input 1', type: 'any' },
      { id: 'input2', label: 'Input 2', type: 'any' },
      { id: 'input3', label: 'Input 3', type: 'any' },
      { id: 'input4', label: 'Input 4', type: 'any' },
    ],
    outputs: [{ id: 'merged', label: 'Merged', type: 'any' }],
    configFields: [
      {
        name: 'mode',
        label: 'Merge Mode',
        type: 'select',
        options: [
          { value: 'waitAll', label: 'Wait for All' },
          { value: 'waitAny', label: 'Wait for Any' },
          { value: 'combine', label: 'Combine Objects' },
          { value: 'concat', label: 'Concatenate Arrays' },
          { value: 'zip', label: 'Zip Arrays' },
        ],
        default: 'waitAll',
      },
      {
        name: 'outputFormat',
        label: 'Output Format',
        type: 'select',
        options: [
          { value: 'array', label: 'Array' },
          { value: 'object', label: 'Object' },
        ],
        default: 'array',
      },
      { name: 'ignoreEmpty', label: 'Ignore Empty Inputs', type: 'boolean', default: true },
      { name: 'timeout', label: 'Timeout (ms, 0 = none)', type: 'number', default: 0 },
    ],
    defaultData: { mode: 'waitAll', outputFormat: 'array', ignoreEmpty: true, timeout: 0 },
  },
  {
    type: 'split',
    label: 'Split',
    description: 'Split data into multiple outputs',
    category: 'logic',
    icon: '‚úÇÔ∏è',
    color: '#F59E0B',
    bgColor: '#FEF3C7',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [
      { id: 'output1', label: 'Output 1', type: 'any' },
      { id: 'output2', label: 'Output 2', type: 'any' },
      { id: 'output3', label: 'Output 3', type: 'any' },
      { id: 'output4', label: 'Output 4', type: 'any' },
    ],
    configFields: [
      {
        name: 'mode',
        label: 'Split Mode',
        type: 'select',
        options: [
          { value: 'broadcast', label: 'Broadcast (Same to All)' },
          { value: 'roundRobin', label: 'Round Robin' },
          { value: 'arrayItems', label: 'Split Array Items' },
          { value: 'chunks', label: 'Split into Chunks' },
          { value: 'byField', label: 'Split by Field Value' },
        ],
        default: 'broadcast',
      },
      { name: 'chunkSize', label: 'Chunk Size', type: 'number', default: 10, min: 1 },
      { name: 'splitField', label: 'Split Field', type: 'text', placeholder: 'data.type' },
    ],
    defaultData: { mode: 'broadcast', chunkSize: 10, splitField: '' },
  },
  {
    type: 'errorHandler',
    label: 'Error Handler',
    description: 'Handle and catch errors in the workflow',
    category: 'logic',
    icon: '‚ö†Ô∏è',
    color: '#EF4444',
    bgColor: '#FEE2E2',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [
      { id: 'success', label: 'Success', type: 'any' },
      { id: 'error', label: 'Error', type: 'object' },
    ],
    configFields: [
      {
        name: 'onError',
        label: 'On Error Action',
        type: 'select',
        options: [
          { value: 'catch', label: 'Catch & Continue' },
          { value: 'stop', label: 'Stop Workflow' },
          { value: 'retry', label: 'Retry' },
          { value: 'fallback', label: 'Use Fallback Value' },
          { value: 'ignore', label: 'Ignore Error' },
        ],
        default: 'catch',
      },
      { name: 'fallbackValue', label: 'Fallback Value', type: 'textarea', placeholder: 'Default value on error' },
      { name: 'logError', label: 'Log Error', type: 'boolean', default: true },
      { name: 'includeStack', label: 'Include Stack Trace', type: 'boolean', default: false },
      { name: 'errorMessage', label: 'Custom Error Message', type: 'text', placeholder: 'An error occurred' },
    ],
    defaultData: { onError: 'catch', fallbackValue: '', logError: true, includeStack: false, errorMessage: '' },
  },

  // ==========================================
  // COMMUNICATION NODES (44-48)
  // ==========================================
  {
    type: 'email',
    label: 'Email',
    description: 'Send emails via SMTP or API',
    category: 'communication',
    icon: 'üìß',
    color: '#EC4899',
    bgColor: '#FCE7F3',
    inputs: [
      { id: 'body', label: 'Email Body', type: 'string' },
      { id: 'attachments', label: 'Attachments', type: 'array' },
    ],
    outputs: [
      { id: 'result', label: 'Result', type: 'object' },
      { id: 'messageId', label: 'Message ID', type: 'string' },
    ],
    configFields: [
      {
        name: 'provider',
        label: 'Provider',
        type: 'select',
        options: [
          { value: 'smtp', label: 'SMTP' },
          { value: 'sendgrid', label: 'SendGrid' },
          { value: 'mailgun', label: 'Mailgun' },
          { value: 'ses', label: 'AWS SES' },
          { value: 'resend', label: 'Resend' },
        ],
        default: 'smtp',
      },
      { name: 'to', label: 'To', type: 'text', placeholder: 'recipient@example.com', required: true },
      { name: 'cc', label: 'CC', type: 'text', placeholder: 'cc@example.com' },
      { name: 'bcc', label: 'BCC', type: 'text', placeholder: 'bcc@example.com' },
      { name: 'from', label: 'From', type: 'text', placeholder: 'sender@example.com', required: true },
      { name: 'subject', label: 'Subject', type: 'text', placeholder: 'Email subject', required: true },
      { name: 'body', label: 'Body', type: 'textarea', placeholder: 'Email content...' },
      { name: 'isHtml', label: 'HTML Email', type: 'boolean', default: false },
      { name: 'replyTo', label: 'Reply-To', type: 'text', placeholder: 'reply@example.com' },
    ],
    defaultData: { provider: 'smtp', to: '', cc: '', bcc: '', from: '', subject: '', body: '', isHtml: false, replyTo: '' },
  },
  {
    type: 'slack',
    label: 'Slack',
    description: 'Send messages to Slack channels',
    category: 'communication',
    icon: 'üí¨',
    color: '#4A154B',
    bgColor: '#F3E8FF',
    inputs: [{ id: 'message', label: 'Message', type: 'string' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'object' },
      { id: 'ts', label: 'Message Timestamp', type: 'string' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'postMessage', label: 'Post Message' },
          { value: 'updateMessage', label: 'Update Message' },
          { value: 'deleteMessage', label: 'Delete Message' },
          { value: 'uploadFile', label: 'Upload File' },
          { value: 'addReaction', label: 'Add Reaction' },
        ],
        default: 'postMessage',
      },
      { name: 'channel', label: 'Channel', type: 'text', placeholder: '#general or C1234567890', required: true },
      { name: 'message', label: 'Message', type: 'textarea', placeholder: 'Hello from workflow!' },
      { name: 'username', label: 'Bot Username', type: 'text', placeholder: 'Workflow Bot' },
      { name: 'iconEmoji', label: 'Icon Emoji', type: 'text', placeholder: ':robot_face:' },
      { name: 'threadTs', label: 'Thread Timestamp (for replies)', type: 'text', placeholder: '1234567890.123456' },
      { name: 'blocks', label: 'Block Kit JSON', type: 'code', placeholder: '[{"type": "section", ...}]' },
    ],
    defaultData: { operation: 'postMessage', channel: '', message: '', username: 'Workflow Bot', iconEmoji: ':robot_face:', threadTs: '', blocks: '' },
  },
  {
    type: 'discord',
    label: 'Discord',
    description: 'Send messages to Discord channels',
    category: 'communication',
    icon: 'üéÆ',
    color: '#5865F2',
    bgColor: '#EEF2FF',
    inputs: [{ id: 'message', label: 'Message', type: 'string' }],
    outputs: [{ id: 'result', label: 'Result', type: 'object' }],
    configFields: [
      {
        name: 'method',
        label: 'Method',
        type: 'select',
        options: [
          { value: 'webhook', label: 'Webhook' },
          { value: 'bot', label: 'Bot API' },
        ],
        default: 'webhook',
      },
      { name: 'webhookUrl', label: 'Webhook URL', type: 'password', placeholder: 'https://discord.com/api/webhooks/...' },
      { name: 'content', label: 'Message Content', type: 'textarea', placeholder: 'Hello Discord!' },
      { name: 'username', label: 'Username', type: 'text', placeholder: 'Workflow Bot' },
      { name: 'avatarUrl', label: 'Avatar URL', type: 'text', placeholder: 'https://...' },
      { name: 'embeds', label: 'Embeds (JSON)', type: 'code', placeholder: '[{"title": "...", "description": "..."}]' },
      { name: 'tts', label: 'Text-to-Speech', type: 'boolean', default: false },
    ],
    defaultData: { method: 'webhook', webhookUrl: '', content: '', username: 'Workflow Bot', avatarUrl: '', embeds: '', tts: false },
  },
  {
    type: 'sms',
    label: 'SMS/Twilio',
    description: 'Send SMS messages via Twilio',
    category: 'communication',
    icon: 'üì±',
    color: '#F22F46',
    bgColor: '#FEE2E2',
    inputs: [{ id: 'message', label: 'Message', type: 'string' }],
    outputs: [
      { id: 'result', label: 'Result', type: 'object' },
      { id: 'sid', label: 'Message SID', type: 'string' },
    ],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'sendSms', label: 'Send SMS' },
          { value: 'sendWhatsApp', label: 'Send WhatsApp' },
          { value: 'makeCall', label: 'Make Voice Call' },
          { value: 'getStatus', label: 'Get Message Status' },
        ],
        default: 'sendSms',
      },
      { name: 'to', label: 'To Phone Number', type: 'text', placeholder: '+1234567890', required: true },
      { name: 'from', label: 'From Phone Number', type: 'text', placeholder: '+1234567890', required: true },
      { name: 'body', label: 'Message Body', type: 'textarea', placeholder: 'Your SMS message...', required: true },
      { name: 'mediaUrl', label: 'Media URL (MMS)', type: 'text', placeholder: 'https://...' },
      { name: 'statusCallback', label: 'Status Callback URL', type: 'text', placeholder: 'https://...' },
    ],
    defaultData: { operation: 'sendSms', to: '', from: '', body: '', mediaUrl: '', statusCallback: '' },
  },
  {
    type: 'pushNotification',
    label: 'Push Notification',
    description: 'Send push notifications',
    category: 'communication',
    icon: 'üîî',
    color: '#10B981',
    bgColor: '#D1FAE5',
    inputs: [{ id: 'message', label: 'Message', type: 'string' }],
    outputs: [{ id: 'result', label: 'Result', type: 'object' }],
    configFields: [
      {
        name: 'provider',
        label: 'Provider',
        type: 'select',
        options: [
          { value: 'firebase', label: 'Firebase Cloud Messaging' },
          { value: 'onesignal', label: 'OneSignal' },
          { value: 'pusher', label: 'Pusher' },
          { value: 'expo', label: 'Expo Push' },
        ],
        default: 'firebase',
      },
      { name: 'title', label: 'Title', type: 'text', placeholder: 'Notification Title', required: true },
      { name: 'body', label: 'Body', type: 'textarea', placeholder: 'Notification body text', required: true },
      { name: 'token', label: 'Device Token / Topic', type: 'text', placeholder: 'Device token or topic name', required: true },
      { name: 'data', label: 'Custom Data (JSON)', type: 'code', placeholder: '{"key": "value"}' },
      { name: 'icon', label: 'Icon URL', type: 'text', placeholder: 'https://...' },
      { name: 'clickAction', label: 'Click Action URL', type: 'text', placeholder: 'https://...' },
      { name: 'badge', label: 'Badge Count', type: 'number', default: 1 },
      { name: 'sound', label: 'Sound', type: 'text', placeholder: 'default' },
    ],
    defaultData: { provider: 'firebase', title: '', body: '', token: '', data: '', icon: '', clickAction: '', badge: 1, sound: 'default' },
  },

  // ==========================================
  // TRANSFORM NODES (49-50)
  // ==========================================
  {
    type: 'transform',
    label: 'Transform',
    description: 'Transform data using JavaScript',
    category: 'transform',
    icon: 'üîß',
    color: '#06B6D4',
    bgColor: '#CFFAFE',
    inputs: [{ id: 'input', label: 'Input', type: 'any' }],
    outputs: [{ id: 'output', label: 'Output', type: 'any' }],
    configFields: [
      {
        name: 'transformType',
        label: 'Transform Type',
        type: 'select',
        options: [
          { value: 'code', label: 'JavaScript Code' },
          { value: 'template', label: 'Template String' },
          { value: 'jmespath', label: 'JMESPath' },
          { value: 'jsonata', label: 'JSONata' },
        ],
        default: 'code',
      },
      { name: 'code', label: 'Transform Code', type: 'code', placeholder: '// Access input as `data`\nreturn data.map(item => item.name);', required: true },
      { name: 'template', label: 'Template', type: 'textarea', placeholder: 'Hello {{name}}, your order #{{orderId}} is ready!' },
      { name: 'async', label: 'Async Transform', type: 'boolean', default: false },
    ],
    defaultData: { transformType: 'code', code: '', template: '', async: false },
  },
  {
    type: 'textFormatter',
    label: 'Text Formatter',
    description: 'Format and manipulate text',
    category: 'transform',
    icon: '‚úèÔ∏è',
    color: '#06B6D4',
    bgColor: '#CFFAFE',
    inputs: [{ id: 'text', label: 'Text', type: 'string' }],
    outputs: [{ id: 'formatted', label: 'Formatted Text', type: 'string' }],
    configFields: [
      {
        name: 'operation',
        label: 'Operation',
        type: 'select',
        options: [
          { value: 'uppercase', label: 'UPPERCASE' },
          { value: 'lowercase', label: 'lowercase' },
          { value: 'capitalize', label: 'Capitalize Words' },
          { value: 'titleCase', label: 'Title Case' },
          { value: 'sentenceCase', label: 'Sentence case' },
          { value: 'trim', label: 'Trim Whitespace' },
          { value: 'slugify', label: 'Slugify (URL-safe)' },
          { value: 'camelCase', label: 'camelCase' },
          { value: 'snakeCase', label: 'snake_case' },
          { value: 'kebabCase', label: 'kebab-case' },
          { value: 'replace', label: 'Find & Replace' },
          { value: 'truncate', label: 'Truncate' },
          { value: 'pad', label: 'Pad String' },
          { value: 'reverse', label: 'Reverse' },
          { value: 'base64Encode', label: 'Base64 Encode' },
          { value: 'base64Decode', label: 'Base64 Decode' },
          { value: 'urlEncode', label: 'URL Encode' },
          { value: 'urlDecode', label: 'URL Decode' },
          { value: 'hash', label: 'Hash (MD5/SHA)' },
        ],
        default: 'trim',
      },
      { name: 'find', label: 'Find (for replace)', type: 'text', placeholder: 'text to find' },
      { name: 'replaceWith', label: 'Replace With', type: 'text', placeholder: 'replacement text' },
      { name: 'useRegex', label: 'Use Regex', type: 'boolean', default: false },
      { name: 'maxLength', label: 'Max Length (for truncate)', type: 'number', default: 100 },
      { name: 'suffix', label: 'Truncate Suffix', type: 'text', default: '...' },
      { name: 'padLength', label: 'Pad Length', type: 'number', default: 10 },
      { name: 'padChar', label: 'Pad Character', type: 'text', default: ' ' },
      { name: 'padPosition', label: 'Pad Position', type: 'select', options: [
        { value: 'start', label: 'Start' },
        { value: 'end', label: 'End' },
      ], default: 'start' },
      { name: 'hashAlgorithm', label: 'Hash Algorithm', type: 'select', options: [
        { value: 'md5', label: 'MD5' },
        { value: 'sha1', label: 'SHA-1' },
        { value: 'sha256', label: 'SHA-256' },
        { value: 'sha512', label: 'SHA-512' },
      ], default: 'sha256' },
    ],
    defaultData: { operation: 'trim', find: '', replaceWith: '', useRegex: false, maxLength: 100, suffix: '...', padLength: 10, padChar: ' ', padPosition: 'start', hashAlgorithm: 'sha256' },
  },
];

// ============================================
// HELPER FUNCTIONS
// ============================================

export const getNodesByCategory = (category: NodeCategory): NodeDefinition[] => {
  return NODE_DEFINITIONS.filter(node => node.category === category);
};

export const getNodeByType = (type: string): NodeDefinition | undefined => {
  return NODE_DEFINITIONS.find(node => node.type === type);
};

export const getAllCategories = (): NodeCategory[] => {
  return Object.keys(NODE_CATEGORIES) as NodeCategory[];
};

export const searchNodes = (query: string): NodeDefinition[] => {
  const lowerQuery = query.toLowerCase();
  return NODE_DEFINITIONS.filter(node =>
    node.label.toLowerCase().includes(lowerQuery) ||
    node.description.toLowerCase().includes(lowerQuery) ||
    node.type.toLowerCase().includes(lowerQuery) ||
    node.category.toLowerCase().includes(lowerQuery)
  );
};

export const getNodeCount = (): number => {
  return NODE_DEFINITIONS.length;
};

export const getNodeCountByCategory = (): Record<NodeCategory, number> => {
  const counts: Record<NodeCategory, number> = {
    ai: 0,
    data: 0,
    integration: 0,
    logic: 0,
    communication: 0,
    transform: 0,
  };

  NODE_DEFINITIONS.forEach(node => {
    counts[node.category]++;
  });

  return counts;
};